# üöÄ Phase 2: MetaMask + Polygon Integration

## üéØ –¶–µ–ª—å: –ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å DEMO –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –±–ª–æ–∫—á–µ–π–Ω —Ä—É–ª–µ—Ç–∫—É

### üìã –ó–∞–¥–∞—á–∏ Phase 2

#### 1. ü¶ä MetaMask –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] **Web3 –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MetaMask
- [ ] **Wallet UI** - –ö–Ω–æ–ø–∫–∏ Connect/Disconnect
- [ ] **Network switching** - –ê–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ Polygon
- [ ] **Balance display** - –ü–æ–∫–∞–∑ MATIC –±–∞–ª–∞–Ω—Å–∞

#### 2. üìú –°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–∞ Polygon
- [ ] **RouletteContract.sol** - –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Ä—É–ª–µ—Ç–∫–∏
- [ ] **Bet management** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∞–º–∏
- [ ] **Random generation** - –ß–µ—Å—Ç–Ω–æ–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª
- [ ] **Payouts** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã–ø–ª–∞—Ç—ã

#### 3. üîó Backend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] **Contract interaction** - –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º
- [ ] **Transaction monitoring** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- [ ] **Event listening** - –°–ª—É—à–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –±–ª–æ–∫—á–µ–π–Ω–∞
- [ ] **Gas optimization** - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–º–∏—Å—Å–∏–π

#### 4. üé® Frontend –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] **React migration** - –ü–µ—Ä–µ—Ö–æ–¥ —Å HTML –Ω–∞ React
- [ ] **MetaMask UI** - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ—à–µ–ª—å–∫–∞
- [ ] **Transaction status** - –°—Ç–∞—Ç—É—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- [ ] **Real balance** - –†–µ–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å MATIC

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ Phase 2

### Smart Contracts
- **Solidity** ^0.8.19
- **Hardhat** - Development framework
- **OpenZeppelin** - –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- **Polygon Mumbai** - Testnet –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### Frontend
- **React** 18+
- **ethers.js** - –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –±–ª–æ–∫—á–µ–π–Ω–æ–º
- **MetaMask SDK** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ—à–µ–ª—å–∫–∞
- **Material-UI** - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### Backend
- **FastAPI** (–æ—Å—Ç–∞–µ—Ç—Å—è)
- **Web3.py** - Python –±–ª–æ–∫—á–µ–π–Ω –±–∏–±–ª–∏–æ—Ç–µ–∫–∞  
- **Polygon endpoints** - RPC –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **Redis** - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## üìÅ –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
zk-roulette/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ roulette_server.py     # üé∞ DEMO —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ main_v2.py             # üîß Polygon —Å–µ—Ä–≤–µ—Ä  
‚îÇ   ‚îú‚îÄ‚îÄ contracts/             # üìú ABI —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ services/              # üîó Blockchain —Å–µ—Ä–≤–∏—Å—ã
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/        # ‚öõÔ∏è React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/             # ü™ù Web3 —Ö—É–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ contracts/         # üìã Contract ABIs
‚îú‚îÄ‚îÄ contracts/
‚îÇ   ‚îú‚îÄ‚îÄ RouletteContract.sol   # üé∞ –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç
‚îÇ   ‚îú‚îÄ‚îÄ RandomOracle.sol       # üé≤ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏  
‚îÇ   ‚îî‚îÄ‚îÄ test/                  # üß™ –¢–µ—Å—Ç—ã –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
‚îî‚îÄ‚îÄ scripts/
    ‚îú‚îÄ‚îÄ deploy.js              # üöÄ –î–µ–ø–ª–æ–π —Å–∫—Ä–∏–ø—Ç—ã
    ‚îî‚îÄ‚îÄ verify.js              # ‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
```

## üí∞ –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å v2

### Polygon Mainnet –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞**: 0.1 MATIC (~$0.08)
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞**: 1000 MATIC (~$800)
- **–ö–æ–º–∏—Å—Å–∏—è —Å–µ—Ç–∏**: ~$0.001 –∑–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
- **House Edge**: 2.7% (—Å—Ç–∞–Ω–¥–∞—Ä—Ç)

### –ü—Ä–æ–µ–∫—Ç–∏—Ä—É–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- **–°—Ç–∞–≤–æ–∫ –≤ –¥–µ–Ω—å**: 100-10,000
- **–°—Ä–µ–¥–Ω—è—è —Å—Ç–∞–≤–∫–∞**: 10 MATIC
- **–î–Ω–µ–≤–Ω–æ–π –æ–±–æ—Ä–æ—Ç**: 1,000-100,000 MATIC
- **–î–æ—Ö–æ–¥ –¥–æ–º–∞**: 27-2,700 MATIC/–¥–µ–Ω—å ($22-$2,160)

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å Phase 2

### Smart Contract Security:
- **ReentrancyGuard** - –ó–∞—â–∏—Ç–∞ –æ—Ç —Ä–µ–µ–Ω—Ç—Ä–∞–Ω—Å –∞—Ç–∞–∫
- **Access Control** - –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å –¥–æ—Å—Ç—É–ø–∞
- **Pause mechanism** - –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
- **Audit –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å** - –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –∞—É–¥–∏—Ç—É

### Frontend Security:
- **Input validation** - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–æ–≤
- **Transaction simulation** - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **Error handling** - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –±–ª–æ–∫—á–µ–π–Ω–∞
- **User education** - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏

## ‚è±Ô∏è Timeline Phase 2

### Week 1: Smart Contracts
- **Day 1-2**: RouletteContract.sol —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- **Day 3-4**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- **Day 5-7**: –î–µ–ø–ª–æ–π –Ω–∞ Mumbai testnet

### Week 2: MetaMask Integration  
- **Day 1-3**: React app –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- **Day 4-5**: MetaMask –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- **Day 6-7**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ wallet –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### Week 3: Backend Integration
- **Day 1-3**: Web3.py –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **Day 4-5**: Event listening —Å–∏—Å—Ç–µ–º–∞
- **Day 6-7**: API endpoints –¥–ª—è –±–ª–æ–∫—á–µ–π–Ω–∞

### Week 4: Testing & Polish
- **Day 1-3**: End-to-end —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Day 4-5**: UI/UX –¥–æ—Ä–∞–±–æ—Ç–∫–∏  
- **Day 6-7**: Production –¥–µ–ø–ª–æ–π

## üß™ Testing Strategy

### Contract Testing:
```bash
# Hardhat —Ç–µ—Å—Ç—ã
npx hardhat test

# Coverage –æ—Ç—á–µ—Ç
npx hardhat coverage

# Gas reporter
npx hardhat test --reporter eth-gas-reporter
```

### Integration Testing:
- **Mumbai testnet** - –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Metamask testnet** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- **Load testing** - –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üöÄ Deployment Plan

### Testnet (Mumbai):
1. **–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã** ‚Üí Mumbai Polygon
2. **Frontend** ‚Üí Vercel/Netlify  
3. **Backend** ‚Üí Railway/Heroku
4. **Testing** ‚Üí Community beta

### Mainnet (Polygon):
1. **Security audit** ‚Üí –ö–æ–Ω—Ç—Ä–∞–∫—Ç –∞—É–¥–∏—Ç
2. **Contracts** ‚Üí Polygon Mainnet
3. **Production** ‚Üí AWS/Google Cloud
4. **Launch** ‚Üí Public release

## üìä Success Metrics

### Phase 2 KPIs:
- [ ] **MetaMask connection** —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 100%
- [ ] **Test transactions** –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ  
- [ ] **Gas costs** < $0.01 –∑–∞ –∏–≥—Ä—É
- [ ] **UI responsiveness** < 2 —Å–µ–∫ –Ω–∞ –¥–µ–π—Å—Ç–≤–∏–µ
- [ ] **Smart contract** –ø—Ä–æ—Ö–æ–¥–∏—Ç –∞—É–¥–∏—Ç

### User Experience:
- [ ] **Onboarding** < 3 –º–∏–Ω—É—Ç—ã –¥–ª—è –Ω–æ–≤–∏—á–∫–∞
- [ ] **Game flow** –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–µ–Ω
- [ ] **Error messages** –ø–æ–Ω—è—Ç–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- [ ] **Mobile responsive** —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### Polygon Development:
- [Polygon Docs](https://docs.polygon.technology/)
- [Mumbai Testnet](https://mumbaifaucet.com/)
- [PolygonScan](https://polygonscan.com/)

### MetaMask Integration:
- [MetaMask Docs](https://docs.metamask.io/)
- [ethers.js Guide](https://docs.ethers.io/)
- [Web3 React Hooks](https://github.com/NoahZinsmeister/web3-react)

### Smart Contracts:
- [OpenZeppelin](https://openzeppelin.com/contracts/)
- [Hardhat](https://hardhat.org/)
- [Solidity Docs](https://docs.soliditylang.org/)

---

## üéØ Ready to Start Phase 2?

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DEMO –Ω–∞ GitHub, –Ω–∞—á–∏–Ω–∞–µ–º Phase 2:

```bash
# –°–æ–∑–¥–∞–π –Ω–æ–≤—É—é –≤–µ—Ç–∫—É –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è
git checkout -b phase2-metamask-polygon

# –ù–∞—á–∏–Ω–∞–π —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
cd contracts
npm init -y
npm install --save-dev hardhat
```

**üöÄ Let's build the future of decentralized gaming!** 